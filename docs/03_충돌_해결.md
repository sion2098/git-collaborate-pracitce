# Git 충돌 해결 실습

## 개요

실제 협업에서는 여러 사람이 같은 파일을 수정할 때 **충돌(Conflict)**이 발생합니다.
이 실습에서는 의도적으로 충돌을 발생시키고 해결하는 방법을 배웁니다.

---

## 충돌이란?

두 명 이상이 **같은 파일의 같은 부분**을 다르게 수정했을 때 발생합니다.

```
팀원 A: DECIMAL_PLACES = 3
팀원 B: DECIMAL_PLACES = 4
          ↓
Git: "둘 중 어떤 값을 사용해야 하지? 🤔"
          ↓
      충돌 발생!
```

---

## 실습 시나리오

### 상황 설명

`scenarios/SHARED_CONFIG.py` 파일의 `DECIMAL_PLACES` 값을:
- 팀원 A: `2` → `3`으로 변경
- 팀원 B: `2` → `4`로 변경
- 팀원 C: `2` → `5`로 변경

모두가 동시에 수정하면 충돌이 발생합니다!

---

## Step 1: 각자 브랜치 생성 및 수정

### 모든 팀원 공통

```bash
# 먼저 main에서 최신 상태 확인
git checkout main
git pull origin main

# 각자 브랜치 생성
git checkout -b config/update-decimals-이름
# 예: git checkout -b config/update-decimals-김철수
```

### scenarios/SHARED_CONFIG.py 수정

**팀원 A**:
```python
# 변경 전
DECIMAL_PLACES = 2

# 변경 후
DECIMAL_PLACES = 3  # 팀원 A: 3자리로 변경
```

**팀원 B**:
```python
DECIMAL_PLACES = 4  # 팀원 B: 4자리로 변경
```

**팀원 C**:
```python
DECIMAL_PLACES = 5  # 팀원 C: 5자리로 변경
```

### 커밋 및 Push

```bash
git add scenarios/SHARED_CONFIG.py
git commit -m "chore: DECIMAL_PLACES를 N으로 변경"
git push -u origin config/update-decimals-이름
```

---

## Step 2: 첫 번째 PR Merge (성공)

1. **팀원 A**가 먼저 PR 생성
2. 리뷰 후 Merge
3. main 브랜치가 업데이트됨 (`DECIMAL_PLACES = 3`)

---

## Step 3: 두 번째 PR 생성 (충돌 발생!)

1. **팀원 B**가 PR 생성
2. GitHub에서 경고 표시:

```
❌ This branch has conflicts that must be resolved
```

이제 충돌을 해결해야 합니다!

---

## Step 4: 충돌 해결

### 방법 1: 명령줄에서 해결 (권장)

```bash
# 1. main 최신화
git checkout main
git pull origin main

# 2. 내 브랜치로 이동
git checkout config/update-decimals-팀원B

# 3. main을 내 브랜치에 merge
git merge main
```

이때 충돌 메시지가 나타납니다:
```
Auto-merging scenarios/SHARED_CONFIG.py
CONFLICT (content): Merge conflict in scenarios/SHARED_CONFIG.py
Automatic merge failed; fix conflicts and then commit the result.
```

### 충돌 상태 확인

```bash
git status
```

출력:
```
Unmerged paths:
  both modified:   scenarios/SHARED_CONFIG.py
```

### 충돌 파일 내용

`scenarios/SHARED_CONFIG.py`를 열면:

```python
<<<<<<< HEAD
DECIMAL_PLACES = 4  # 팀원 B: 4자리로 변경
=======
DECIMAL_PLACES = 3  # 팀원 A: 3자리로 변경
>>>>>>> main
```

**충돌 마커 설명:**
- `<<<<<<< HEAD`: 내 브랜치의 변경사항 시작
- `=======`: 구분선
- `>>>>>>> main`: main 브랜치의 변경사항 끝

### 충돌 해결

팀에서 논의 후 하나를 선택하거나 통합합니다:

**옵션 1: 내 값 유지**
```python
DECIMAL_PLACES = 4
```

**옵션 2: main 값 유지**
```python
DECIMAL_PLACES = 3
```

**옵션 3: 새로운 값으로 통합**
```python
DECIMAL_PLACES = 4  # 팀 합의: 4자리로 통일
```

충돌 마커(`<<<<<<<`, `=======`, `>>>>>>>`)를 모두 삭제하고 최종 코드만 남깁니다.

### 해결 후 커밋

```bash
# 수정된 파일 스테이징
git add scenarios/SHARED_CONFIG.py

# 커밋 (자동 생성된 메시지 사용 가능)
git commit -m "resolve: DECIMAL_PLACES 충돌 해결 - 4자리로 통일"

# Push
git push origin config/update-decimals-팀원B
```

이제 PR이 Merge 가능 상태가 됩니다!

---

## 방법 2: VSCode에서 해결

VSCode는 충돌을 시각적으로 해결할 수 있습니다.

1. 충돌 파일 열기
2. 상단에 표시되는 옵션 클릭:
   - **Accept Current Change**: 내 변경사항 사용
   - **Accept Incoming Change**: main 변경사항 사용
   - **Accept Both Changes**: 둘 다 유지
   - **Compare Changes**: 비교 보기

3. 선택 후 저장
4. `git add`, `git commit`, `git push`

---

## 방법 3: GitHub에서 해결

1. PR 페이지에서 **Resolve conflicts** 버튼 클릭
2. 웹 에디터에서 충돌 마커 수정
3. **Mark as resolved** 클릭
4. **Commit merge** 클릭

---

## 추가 실습: SUPPORTED_OPERATIONS 충돌

더 연습하고 싶다면, 각 팀원이 `SUPPORTED_OPERATIONS` 리스트에 자신의 함수를 추가해보세요.

**팀원 A**:
```python
SUPPORTED_OPERATIONS = [
    "add",
    "subtract",
    "multiply",  # 추가
    "divide",    # 추가
]
```

**팀원 B**:
```python
SUPPORTED_OPERATIONS = [
    "add",
    "subtract",
    "mean",      # 추가
    "median",    # 추가
]
```

이 경우, 두 변경사항을 모두 합치는 것이 올바른 해결책입니다:
```python
SUPPORTED_OPERATIONS = [
    "add",
    "subtract",
    "multiply",
    "divide",
    "mean",
    "median",
]
```

---

## 충돌 예방 팁

1. **자주 Pull 하기**: 작업 전 항상 `git pull origin main`
2. **작은 단위로 커밋**: 변경사항을 작게 나누어 커밋
3. **같은 파일 동시 수정 피하기**: 작업 전 팀원과 소통
4. **브랜치 주기적으로 업데이트**: 오래된 브랜치일수록 충돌 가능성 증가

---

## 명령어 요약

```bash
# 최신 main 가져오기
git checkout main
git pull origin main

# 내 브랜치에서 main merge
git checkout my-branch
git merge main

# 충돌 확인
git status

# 충돌 해결 후
git add <충돌-파일>
git commit -m "resolve: 충돌 해결"
git push
```

---

## 실습 완료!

축하합니다! Git 팀 협업의 핵심인 충돌 해결을 경험했습니다.

**배운 내용 정리:**
- 충돌이 발생하는 이유
- 충돌 마커 읽는 법
- 명령줄/VSCode/GitHub에서 충돌 해결
- 충돌 예방 방법

👉 [README.md](../README.md)로 돌아가서 완료 체크리스트를 확인하세요!
